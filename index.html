<!DOCTYPE html>
<html lang="hu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ghost of the Mountains: H√≥p√°rduc BI Elemz√©s</title>
<script src="https://cdn.jsdelivr.net/npm/vega@5.22.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@5.6.0"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.21.0"></script>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
/* --- ALAP ST√çLUSOK --- */
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: 'Montserrat', sans-serif;
    background-color: #0b1026;
    color: #e6f4f1;
    overflow-x: hidden;
}

/* --- H√ÅTT√âR EFFEKT (H√ìES√âS) - JAV√çTVA! --- */
.snow-bg {
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    /* ITT A V√ÅLTOZ√ÅS: Nincs h√°tt√©rsz√≠n, csak a r√©szecsk√©k */
    background: transparent; 
    
    /* FONTOS: El≈ëre hozzuk a r√©teget (z-index: 10), 
       de √°tkattinthat√≥v√° tessz√ºk (pointer-events: none) */
    z-index: 10; 
    pointer-events: none;
}

/* A h√°tt√©r s√∂t√©t√≠t√©se k√ºl√∂n r√©teg lett, hogy a h√≥ ne takarja ki a h√°tteret, csak a k√©pet */
body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: radial-gradient(circle at bottom, #1b2949 0%, #0b1026 100%);
    z-index: -2;
}

.snowflake {
    position: absolute;
    top: -10px;
    background: white;
    border-radius: 50%;
    opacity: 0.8;
    animation: fall linear infinite;
    /* Egy kis hom√°lyos√≠t√°s, hogy t√©rhat√°s√∫ legyen */
    filter: blur(1px); 
}
@keyframes fall {
    to { transform: translateY(105vh); }
}

/* --- HERO SECTION --- */
.hero {
    height: 100vh;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 20px;
    position: relative;
    
    /* A SAJ√ÅT K√âPED BET√ñLT√âSE */
    background: linear-gradient(rgba(11, 16, 38, 0.3), rgba(11, 16, 38, 0.8)),
                url('snowleo.jpg'); 
    
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    box-shadow: inset 0 -150px 150px #0b1026;
    /* Ez biztos√≠tja, hogy a hero tartalom a h√≥ alatt, de a h√°tt√©r felett legyen */
    z-index: 1; 
}

.hero h1 {
    font-size: 4em;
    font-weight: 800;
    letter-spacing: -2px;
    color: #fff;
    text-shadow: 0 5px 20px rgba(0,0,0,0.9);
    margin-bottom: 20px;
    text-transform: uppercase;
    position: relative;
    z-index: 20; /* A sz√∂veg legyen a h√≥ felett is, hogy olvashat√≥ maradjon */
}

.hero p {
    font-size: 1.3em;
    max-width: 800px;
    color: #fff;
    font-weight: 500;
    line-height: 1.6;
    text-shadow: 0 2px 10px rgba(0,0,0,1);
    background: rgba(0, 0, 0, 0.4);
    padding: 25px;
    border-radius: 15px;
    backdrop-filter: blur(3px);
    border: 1px solid rgba(255,255,255,0.1);
    position: relative;
    z-index: 20;
}

/* --- TARTALOM --- */
.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 50px 20px;
    position: relative;
    z-index: 5; /* A tartalom legyen a h√°tt√©r felett */
}

.card {
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(174, 217, 224, 0.1);
    border-radius: 20px;
    padding: 40px;
    margin-bottom: 80px;
    box-shadow: 0 20px 50px rgba(0,0,0,0.4);
}

.section-title {
    font-size: 2em;
    margin-bottom: 15px;
    color: #fff;
    border-left: 5px solid #00d2ff;
    padding-left: 20px;
}

.section-desc {
    color: #b0c4de;
    margin-bottom: 30px;
    line-height: 1.7;
    font-size: 1.1em;
}

.viz-container {
    width: 100%;
    display: flex;
    justify-content: center;
    overflow-x: auto;
}

/* --- L√ÅBL√âC --- */
footer {
    text-align: center;
    padding: 50px;
    color: #5d6d7e;
    font-size: 0.9em;
    border-top: 1px solid rgba(255,255,255,0.05);
    position: relative;
    z-index: 5;
}

@media (max-width: 768px) {
    .hero h1 { font-size: 2.5em; }
    .hero p { font-size: 1em; }
    .card { padding: 20px; }
}
</style>
</head>
<body>

<div class="snow-bg" id="snow-container"></div>

<div class="hero">
    <h1>GHOST OF THE MOUNTAINS</h1>
    <p>
        A h√≥p√°rduc (Panthera uncia) Bels≈ë-√Åzsia legrejt√©lyesebb cs√∫csragadoz√≥ja. 
        Az al√°bbi vizualiz√°ci√≥k felt√°rj√°k a popul√°ci√≥k √°llapot√°t, az √∂kol√≥giai √∂sszef√ºgg√©seket 
        √©s a fajmeg≈ërz√©s gazdas√°gi hat√°sait.
    </p>
</div>

<div class="container">

    <div class="card">
        <h2 class="section-title">üó∫Ô∏è √âl≈ëhely √©s V√©detts√©g Elemz√©se</h2>
        <p class="section-desc">
            Hol √©lnek a h√≥p√°rducok? Az al√°bbi diagram a becs√ºlt egyedsz√°mot mutatja r√©gi√≥nk√©nt, 
            a sz√≠nek pedig az √©l≈ëhely min≈ës√©g√©t jelzik (s√∂t√©tebb k√©k = jobb min≈ës√©g).
        </p>
        <div id="viz1" class="viz-container"></div>
    </div>

    <div class="card">
        <h2 class="section-title">‚öñÔ∏è A Zs√°km√°ny√°llatok Szerepe</h2>
        <p class="section-desc">
            Van-e √∂sszef√ºgg√©s a zs√°km√°ny√°llatok √©s a ragadoz√≥k sz√°ma k√∂z√∂tt? 
            A pontdiagram emelked≈ë trendje bizony√≠tja: ahol t√∂bb a zs√°km√°ny (v√≠zszintes tengely), 
            ott t√∂bb a h√≥p√°rduc is (f√ºgg≈ëleges tengely).
        </p>
        <div id="viz2" class="viz-container"></div>
    </div>

    <div class="card">
        <h2 class="section-title">üí∞ Konfliktus vs. Meg≈ërz√©s (√ñsszehasonl√≠t√°s)</h2>
        <p class="section-desc">
            Ez a diagram k√©t elt√©r≈ë adatot hasonl√≠t √∂ssze egyszerre:
            <br>
            <span style="color:#00d2ff; font-weight:bold;">‚óè Z√∂ld vonal (Bal tengely):</span> Turizmusb√≥l sz√°rmaz√≥ bev√©tel ($).<br>
            <span style="color:#ff6b6b; font-weight:bold;">‚óè Piros vonal (Jobb tengely):</span> Orvvad√°szat esetek sz√°ma (db).<br>
            <br>
            J√≥l l√°that√≥ az "oll√≥": ahogy a turizmus bev√©tele n≈ë, az orvvad√°szat drasztikusan cs√∂kken.
        </p>
        <div id="viz3" class="viz-container"></div>
    </div>

</div>

<footer>
    <p>Adatok forr√°sa: Snow Leopard Trust, IUCN Red List, GSLEP Program Estimates</p>
    <p>BI Projekt 2024 - Term√©szetv√©delmi Elemz√©s</p>
</footer>

<script>
    // --- H√ìES√âS ---
    const snowContainer = document.getElementById('snow-container');
    for(let i=0; i<50; i++){
        let flake = document.createElement('div');
        flake.className = 'snowflake';
        flake.style.left = Math.random() * 100 + 'vw';
        // V√©letlenszer≈± m√©ret, hogy term√©szetesebb legyen
        flake.style.width = flake.style.height = (Math.random() * 4 + 2) + 'px';
        flake.style.animationDuration = (Math.random() * 10 + 5) + 's';
        flake.style.opacity = Math.random() * 0.7 + 0.3;
        snowContainer.appendChild(flake);
    }

    // --- VEGA KONFIG ---
    const commonConfig = { actions: false, background: "transparent", theme: "dark" };

    // 1. SPEC: Popul√°ci√≥
    const spec1 = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": "container", "height": 400,
        "data": { "url": "snow_leopard_extended.csv" },
        "mark": {"type": "bar", "cornerRadius": 4},
        "encoding": {
            "x": {"field": "Regio", "type": "nominal", "sort": "-y", "title": null, "axis": {"labelAngle": -45, "labelColor": "#aed9e0"}},
            "y": {"field": "Populacio_Becsles", "type": "quantitative", "title": "Popul√°ci√≥", "axis": {"gridColor": "#334", "labelColor": "#fff"}},
            "color": {"field": "Elohely_Minoseg_Pontszam", "type": "quantitative", "scale": {"scheme": "tealblues"}, "legend": {"title": "Min≈ës√©g"}}
        }
    };

    // 2. SPEC: Scatter
    const spec2 = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": "container", "height": 400,
        "data": { "url": "prey_predator_stats.csv" },
        "mark": {"type": "circle", "size": 150, "opacity": 0.8},
        "encoding": {
            "x": {"field": "Zsakmany_Suruseg_km2", "type": "quantitative", "title": "Zs√°km√°ny (db/km¬≤)", "scale": {"zero": false}, "axis": {"gridColor": "#334", "labelColor": "#fff"}},
            "y": {"field": "Hoparduc_Suruseg_100km2", "type": "quantitative", "title": "H√≥p√°rduc (db/100km¬≤)", "scale": {"zero": false}, "axis": {"gridColor": "#334", "labelColor": "#fff"}},
            "color": {"field": "Terulet_Tipus", "type": "nominal", "legend": {"title": "V√©detts√©g"}},
            "tooltip": [{"field": "Terulet_Nev"}, {"field": "Zsakmany_Suruseg_km2"}, {"field": "Hoparduc_Suruseg_100km2"}]
        }
    };

    // 3. SPEC: DUAL AXIS
    const spec3 = {
        "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
        "width": "container", "height": 400,
        "data": { "url": "leopard_economy.csv" },
        "encoding": { "x": { "field": "Ev", "type": "ordinal", "title": "√âv", "axis": {"labelColor": "#fff"} } },
        "layer": [
            {
                "mark": {"type": "line", "stroke": "#00d2ff", "strokeWidth": 4, "point": true}, // Z√ñLDESK√âK VONAL
                "encoding": {
                    "y": {
                        "field": "Turizmus_Bevetel_USD",
                        "type": "quantitative",
                        "title": "Turizmus Bev√©tel ($)",
                        "axis": {"titleColor": "#00d2ff", "labelColor": "#00d2ff", "gridColor": "#334"}
                    },
                    "tooltip": [{"field": "Ev"}, {"field": "Turizmus_Bevetel_USD", "title": "Bev√©tel ($)"}]
                }
            },
            {
                "mark": {"type": "line", "stroke": "#ff6b6b", "strokeWidth": 4, "point": true}, // PIROS VONAL
                "encoding": {
                    "y": {
                        "field": "Orvvadaszat_Esetek",
                        "type": "quantitative",
                        "title": "Orvvad√°szat (eset)",
                        "axis": {"titleColor": "#ff6b6b", "labelColor": "#ff6b6b", "grid": false, "orient": "right"} // Jobb oldali tengely!
                    },
                    "tooltip": [{"field": "Ev"}, {"field": "Orvvadaszat_Esetek", "title": "Orvvad√°szat (db)"}]
                }
            }
        ],
        "resolve": {"scale": {"y": "independent"}}
    };

    vegaEmbed('#viz1', spec1, commonConfig).catch(console.error);
    vegaEmbed('#viz2', spec2, commonConfig).catch(console.error);
    vegaEmbed('#viz3', spec3, commonConfig).catch(console.error);
</script>
</body>
</html>
